<mxfile host="www.draw.io" modified="2019-12-30T08:35:38.123Z" agent="Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36" etag="vd84chlSaGue860cFZDa" version="12.4.7" type="github">
  <diagram id="prtHgNgQTEPvFCAcTncT" name="Page-1">
    <mxGraphModel dx="1303" dy="1814" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6kuVStWCc_NQh1pCLCfk-2" target="6kuVStWCc_NQh1pCLCfk-3" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-2" value="开始" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="170" y="-30" width="80" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6kuVStWCc_NQh1pCLCfk-3" target="6kuVStWCc_NQh1pCLCfk-40" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-3" value="软件升级" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="150" y="60" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-6" value="设备列表模块" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;" parent="1" vertex="1">
          <mxGeometry x="10" y="80" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-10" value="否" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="6kuVStWCc_NQh1pCLCfk-8" target="6kuVStWCc_NQh1pCLCfk-9" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-53" value="是" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Garamond;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="6kuVStWCc_NQh1pCLCfk-8" target="3z7rhhH2pB_f4L7QTHoq-52">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="445" y="359"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-8" value="七牛云key&lt;br&gt;是否存在?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="320" width="140" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-54" value="是" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Garamond;" edge="1" parent="1" source="3z7rhhH2pB_f4L7QTHoq-52" target="6kuVStWCc_NQh1pCLCfk-20">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="685.3333333333335" y="359.3333333333335" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-77" value="否" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Garamond;" edge="1" parent="1" source="3z7rhhH2pB_f4L7QTHoq-52" target="3z7rhhH2pB_f4L7QTHoq-62">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-52" value="apk升级表是否&lt;br&gt;存在最新&lt;br&gt;非升级成功记录?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="523" y="360" width="150" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-32" value="是" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="6kuVStWCc_NQh1pCLCfk-20" target="6kuVStWCc_NQh1pCLCfk-31" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-80" value="否" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Garamond;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="6kuVStWCc_NQh1pCLCfk-20" target="3z7rhhH2pB_f4L7QTHoq-81">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="917.9300000000003" y="515" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-20" value="判断消息表的消息&lt;br&gt;已存在?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="673.79" y="475" width="164.14" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-73" value="新建" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Garamond;" edge="1" parent="1" source="6kuVStWCc_NQh1pCLCfk-31" target="6kuVStWCc_NQh1pCLCfk-47">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-74" value="处理中" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Garamond;" edge="1" parent="1" source="6kuVStWCc_NQh1pCLCfk-31" target="3z7rhhH2pB_f4L7QTHoq-9">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-31" value="判定消息状态" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="685.86" y="605" width="140" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Garamond;" edge="1" parent="1" source="6kuVStWCc_NQh1pCLCfk-9" target="3z7rhhH2pB_f4L7QTHoq-52">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="390" y="504"/>
              <mxPoint x="390" y="399"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-9" value="保存七牛云key值" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="145" y="470" width="130" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-71" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Garamond;" edge="1" parent="1" source="3z7rhhH2pB_f4L7QTHoq-14" target="3z7rhhH2pB_f4L7QTHoq-29">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-14" value="发布升级消息事件" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="150" y="730" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-41" value="在线" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="6kuVStWCc_NQh1pCLCfk-40" target="6kuVStWCc_NQh1pCLCfk-8" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-44" value="不在线" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="6kuVStWCc_NQh1pCLCfk-40" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="390" y="220" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-40" value="设备是否在线?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="180" width="140" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-46" value="结束" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="390" y="195" width="80" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-68" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Garamond;" edge="1" parent="1" source="6kuVStWCc_NQh1pCLCfk-47" target="3z7rhhH2pB_f4L7QTHoq-29">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="6kuVStWCc_NQh1pCLCfk-47" value="1.前端提示设备处于升级中&lt;br&gt;2.重发升级消息事件," style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="453.75" y="730" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-2" value="处理失败" style="endArrow=classic;html=1;fontFamily=Garamond;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="6kuVStWCc_NQh1pCLCfk-31" target="3z7rhhH2pB_f4L7QTHoq-85">
          <mxGeometry x="-0.3333" width="50" height="50" relative="1" as="geometry">
            <mxPoint x="756" y="690" as="sourcePoint"/>
            <mxPoint x="755.8600000000001" y="730" as="targetPoint"/>
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-5" value="结束" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1020" y="600" width="80" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Garamond;" edge="1" parent="1" source="3z7rhhH2pB_f4L7QTHoq-9" target="3z7rhhH2pB_f4L7QTHoq-51">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="925" y="839"/>
              <mxPoint x="1080" y="839"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-9" value="提示该设备处于软件升级中" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Garamond;" vertex="1" parent="1">
          <mxGeometry x="865.86" y="730" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-13" value="处理成功" style="endArrow=classic;html=1;fontFamily=Garamond;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="6kuVStWCc_NQh1pCLCfk-31" target="3z7rhhH2pB_f4L7QTHoq-5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="305.86" y="890" as="sourcePoint"/>
            <mxPoint x="355.86" y="840" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-33" value="否" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Garamond;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="3z7rhhH2pB_f4L7QTHoq-29" target="3z7rhhH2pB_f4L7QTHoq-34">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="612.4200000000001" y="1030" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-36" value="是" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Garamond;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="3z7rhhH2pB_f4L7QTHoq-29" target="3z7rhhH2pB_f4L7QTHoq-44">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="800" y="910" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-29" value="判断设备是否在&lt;br&gt;本服务器节点上?" style="rhombus;whiteSpace=wrap;html=1;fontFamily=Garamond;" vertex="1" parent="1">
          <mxGeometry x="202.50000000000006" y="850" width="187.5" height="100" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-47" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Garamond;" edge="1" parent="1" source="3z7rhhH2pB_f4L7QTHoq-34" target="3z7rhhH2pB_f4L7QTHoq-46">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-34" value="发布广播消息" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Garamond;" vertex="1" parent="1">
          <mxGeometry x="236.25" y="1010" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontFamily=Garamond;" edge="1" parent="1" source="3z7rhhH2pB_f4L7QTHoq-46" target="3z7rhhH2pB_f4L7QTHoq-44">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-46" value="服务器监听到广播消息" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Garamond;" vertex="1" parent="1">
          <mxGeometry x="600" y="1010" width="108" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-50" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Garamond;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="3z7rhhH2pB_f4L7QTHoq-44" target="3z7rhhH2pB_f4L7QTHoq-51">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1040" y="900" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-44" value="发布升级指令到android" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Garamond;" vertex="1" parent="1">
          <mxGeometry x="840" y="870" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-51" value="结束" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1040" y="875" width="80" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontFamily=Garamond;" edge="1" parent="1" source="3z7rhhH2pB_f4L7QTHoq-62" target="3z7rhhH2pB_f4L7QTHoq-14">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="210" y="730" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-62" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34; ; white-space: normal&quot;&gt;1.apk升级表新增一条记录,状态为预处理&lt;br&gt;2.消息表新增消息,消息状态为预处理&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Garamond;" vertex="1" parent="1">
          <mxGeometry x="147.5" y="570" width="125" height="90" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-81" value="结束" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="920" y="490" width="80" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Garamond;" edge="1" parent="1" source="3z7rhhH2pB_f4L7QTHoq-85" target="3z7rhhH2pB_f4L7QTHoq-51">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="824" y="839"/>
              <mxPoint x="1080" y="839"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-90" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;fontFamily=Garamond;" vertex="1" connectable="0" parent="3z7rhhH2pB_f4L7QTHoq-87">
          <mxGeometry x="-0.5695" y="18" relative="1" as="geometry">
            <mxPoint x="26.33" y="18.67" as="offset"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-91" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontFamily=Garamond;" edge="1" parent="1" source="3z7rhhH2pB_f4L7QTHoq-85" target="3z7rhhH2pB_f4L7QTHoq-62">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="689" y="679"/>
              <mxPoint x="480" y="679"/>
              <mxPoint x="480" y="638"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-85" value="key是否相同" style="rhombus;whiteSpace=wrap;html=1;fontFamily=Garamond;" vertex="1" parent="1">
          <mxGeometry x="688.79" y="730" width="134.14" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="3z7rhhH2pB_f4L7QTHoq-88" value="Text" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Garamond;" vertex="1" parent="1">
          <mxGeometry x="10" y="1090" width="40" height="20" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
